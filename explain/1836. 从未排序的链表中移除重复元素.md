---
title: 1836. 从未排序的链表中移除重复元素
created: 2025-01-05
tags:
  - 数据结构/链表
  - 主题/链表分解
---
## [1836. 从未排序的链表中移除重复元素](https://labuladong.online/algo/problem-set/linkedlist-two-pointers/#slug_remove-duplicates-from-an-unsorted-linked-list)

给定一个链表的第一个节点 `head` ，找到链表中所有出现**多于一次**的元素，并删除这些元素所在的节点。

返回删除后的链表。

**输入:** head = [1,2,3,2]
**输出:** [1,3]
**解释:** 2 在链表中出现了两次，所以所有的 2 都需要被删除。删除了所有的 2 之后，我们还剩下 [1,3] 。

**提示：**

- 链表中节点个数的范围是 `[1, 10^5]`
- `1 <= Node.val <= 10^5`

这道题考察前文 [链表的双指针技巧汇总](https://labuladong.online/algo/essential-technique/linked-list-skills-summary/) 中链表分解的技巧。我们遍历两次链表，第一次记录哪些值出现重复，然后第二次将无重复的节点分解出来。

```python
# 注意：python 代码由 chatGPT🤖 根据我的 java 代码翻译。
# 本代码的正确性已通过力扣验证，如有疑问，可以对照 java 代码查看。

class Solution:
    def deleteDuplicatesUnsorted(self, head: ListNode) -> ListNode:
        count = {}
        # 先遍历一遍链表，记录每个值出现的次数
        p = head
        while p is not None:
            count[p.val] = count.get(p.val, 0) + 1
            p = p.next

        # 将原链表分解为重复节点和无重节点
        dummyDup = ListNode(-1)
        dummyUnique = ListNode(-1)
        pDup = dummyDup
        pUnique = dummyUnique
        p = head

        # 开始分解链表
        while p is not None:
            if count[p.val] > 1:
                pDup.next = p
                pDup = pDup.next
            else:
                pUnique.next = p
                pUnique = pUnique.next
            p = p.next
            pDup.next = None
            pUnique.next = None

        return dummyUnique.next
```

